/* ═══════════════════════════════════════════════════════════
   INFINITY CN — Consolidated Stylesheet
   Single entry point. Import order preserves original cascade:
   fonts → reader → design-system/utilities → app-layout
   ═══════════════════════════════════════════════════════════ */
@import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=Crimson+Pro:ital,wght@0,400;0,500;0,600;1,400;1,500&display=swap');

/* Reader components (panels, codex, analytics, insights) */
@import './reader.css';

/* Design system variables, reset, utilities, common components */
@import './index.css';

/* App layout, header, landing, upload, library, modals, AI settings */
@import './App.css';

/* ═══════════════════════════════════════════════════════════
   RESPONSIVE DESIGN — Consolidated Breakpoints
   480px  → small mobile
   768px  → tablet
   1024px → desktop
   1200px → large desktop
   ═══════════════════════════════════════════════════════════ */

/* ── LARGE DESKTOP (1200px+) ── */
@media (min-width: 1200px) {
    .landing-view {
        max-width: 1400px;
    }

    .reader-layout {
        max-width: 900px;
    }

    .reader-layout.sidebar-open {
        max-width: 1300px;
    }

    .library-list {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    }

    .analytics-section,
    .insights-section {
        padding-bottom: 1.25rem;
    }
}

/* ── DESKTOP (1024px+) ── */
@media (min-width: 1024px) {
    .ai-provider-grid {
        grid-template-columns: 1fr 1fr;
    }

    .reader-panels-layout.with-codex .reader-codex {
        width: 320px;
    }
}

/* ── TABLET AND BELOW (max 1024px) ── */
@media (max-width: 1024px) {
    .app-footer {
        padding: 2.5rem 2rem;
    }

    .library-list {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    }

    .modal-content {
        max-width: 400px;
    }

    .ai-panel {
        width: 380px;
    }

    .reader-layout.sidebar-open {
        max-width: 100%;
    }

    .analytics-grid {
        grid-template-columns: 1fr 1fr;
    }
}

/* ── TABLET AND BELOW (max 768px) ── */
@media (max-width: 768px) {
    /* Header */
    .header-island {
        padding: 0 1.25rem;
        height: calc(var(--nav-height) - 0.5rem);
    }

    .logo {
        font-size: 1.1rem;
    }

    .header-actions {
        gap: 0.5rem;
    }

    /* Landing */
    .landing-view {
        padding: 0 1.25rem;
    }

    .hero-section {
        padding: clamp(2rem, 5vh, 4rem) 0 clamp(1.5rem, 3vh, 2.5rem);
    }

    .hero-section::before,
    .hero-section::after {
        display: none;
    }

    .hero-title {
        font-size: clamp(2rem, 9vw, 3.5rem);
    }

    .hero-subtitle {
        font-size: 0.9rem;
    }

    /* Upload */
    .upload-container {
        max-width: 100%;
    }

    .upload-zone {
        padding: 2rem 1.5rem;
    }

    .upload-title {
        font-size: 1.15rem;
    }

    .upload-icon-wrapper {
        width: 52px;
        height: 52px;
    }

    /* Library */
    .library-section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
    }

    .library-list {
        grid-template-columns: 1fr;
        gap: 0.75rem;
    }

    .library-card {
        padding: 1.25rem;
    }

    .library-card-delete {
        opacity: 1;
    }

    /* Reader */
    .reader-wrapper {
        padding: 0 1rem;
    }

    .reader-nav-inner {
        flex-direction: column;
        gap: 0.75rem;
        padding: 0.75rem 1.25rem;
    }

    .reader-nav-actions {
        flex-wrap: wrap;
        justify-content: center;
    }

    .reader-content-wrapper {
        padding: 0 1rem 5rem;
    }

    .reader-panels-layout.with-codex {
        flex-direction: column;
    }

    .reader-codex {
        width: 100%;
        position: static;
        max-height: 50vh;
    }

    .panel-narration .narration-text {
        font-size: 1.05rem;
        line-height: 1.85;
        padding: 1rem 0;
    }

    .dialogue-text {
        font-size: 1.25rem;
    }

    .sfx-text {
        font-size: 2rem;
        margin: 2rem 0;
    }

    .align-left .dialogue-box {
        margin-right: 5%;
    }

    .align-right .dialogue-box {
        margin-left: 5%;
    }

    .align-center .dialogue-box {
        margin: 0 2%;
    }

    /* Footer */
    .app-footer {
        padding: 2rem 1.5rem;
        flex-direction: column;
        gap: 0.75rem;
        text-align: center;
    }

    /* Modals */
    .modal-overlay {
        padding: 1rem;
    }

    .modal-content {
        max-width: 100%;
        padding: 1.5rem;
    }

    .ai-panel {
        width: 100%;
        max-width: 100vw;
    }

    /* Analytics */
    .analytics-grid {
        grid-template-columns: 1fr;
    }

    .insights-keywords {
        gap: 0.4rem;
    }
}

/* ── SMALL MOBILE (max 480px) ── */
@media (max-width: 480px) {
    /* Header */
    .header-island {
        padding: 0 1rem;
    }

    .logo {
        font-size: 1rem;
        gap: 0.4rem;
    }

    .ai-trigger-label {
        display: none;
    }

    .ai-trigger-button {
        padding: 0.3rem;
    }

    /* Landing */
    .hero-eyebrow {
        font-size: 0.6rem;
        padding: 0.4rem 0.75rem;
    }

    .hero-title {
        font-size: clamp(1.75rem, 8vw, 2.5rem);
    }

    .hero-subtitle {
        font-size: 0.85rem;
        max-width: 30ch;
    }

    /* Upload */
    .upload-zone {
        padding: 1.5rem 1rem;
        border-radius: var(--radius-lg);
    }

    .upload-icon-wrapper {
        width: 44px;
        height: 44px;
    }

    .upload-title {
        font-size: 1rem;
    }

    .upload-title .plus-icon {
        width: 36px;
        height: 36px;
        font-size: 1.2rem;
    }

    /* Library */
    .library-section-title {
        font-size: 1.1rem;
    }

    .library-card {
        padding: 1rem;
    }

    .library-card-title {
        font-size: 1rem;
    }

    /* Reader */
    .reader-wrapper {
        padding: 0 0.75rem;
    }

    .reader-nav-inner {
        padding: 0.5rem 1rem;
    }

    .reader-btn {
        padding: 0.4rem;
        min-width: 32px;
        min-height: 32px;
    }

    .reader-btn-label {
        display: none;
    }

    .panel-narration .narration-text {
        font-size: 0.95rem;
        line-height: 1.75;
    }

    .dialogue-text {
        font-size: 1.1rem;
    }

    .sfx-text {
        font-size: 1.5rem;
        margin: 1.5rem 0;
    }

    .story-recap {
        padding: 1rem;
    }

    /* Codex */
    .reader-codex {
        max-height: 40vh;
    }

    .codex-entry {
        padding: 0.65rem;
    }

    /* Modal */
    .modal-content {
        padding: 1.25rem;
        border-radius: var(--radius-lg);
    }

    .modal-header h2 {
        font-size: 1rem;
    }

    /* AI Panel */
    .ai-modal-header {
        padding: 1rem 1.25rem;
    }

    .ai-modal-body {
        padding: 1rem 1.25rem 1.5rem;
    }

    .ai-provider-grid {
        grid-template-columns: 1fr;
    }

    /* Footer */
    .app-footer {
        padding: 1.5rem 1rem;
    }

    .app-footer-brand,
    .app-footer-version {
        font-size: 0.6rem;
    }
}

/* ── TOUCH DEVICE OPTIMIZATIONS ── */
@media (hover: none) and (pointer: coarse) {
    .library-card-delete {
        opacity: 1;
    }

    .upload-zone:hover {
        transform: none;
        box-shadow: none;
    }

    .upload-zone:hover::before {
        opacity: 0;
    }

    .library-card:hover {
        transform: none;
    }

    .reader-btn {
        min-width: 40px;
        min-height: 40px;
    }
}

/* ── REDUCED MOTION ── */
@media (prefers-reduced-motion: reduce) {
    html {
        scroll-behavior: auto;
    }

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
